public:: true
date:: [[Jan 20th, 2023]]
tags:: DevOps, Game, å·²é™ˆæ—§

- ## æœåŠ¡ç«¯æ­å»ºç¯å¢ƒï¼ˆæ–¹å¼ï¼‰
- ### ä½¿ç”¨[LinuxGSM](https://linuxgsm.com/)
- [[LinuxGSM]]æ˜¯ä¸“ä¸ºæ¸¸æˆæœåŠ¡å™¨æ­å»ºè€Œè®¾è®¡çš„å·¥å…·ï¼Œé€šè¿‡å®ƒç®¡ç†L4D2æœåŠ¡å™¨éå¸¸æ–¹ä¾¿ã€‚å”¯ä¸€çš„é—®é¢˜åœ¨äºï¼Œå®ƒçš„å®‰è£…ä¾èµ–Githubç½‘ç»œï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™è®°å¾—è‡ªè¡Œè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚æ”¹hostsï¼Œå¯ä»¥å€ŸåŠ©ç«™é•¿å·¥å…·è·å–CDNçš„æœåŠ¡å™¨ã€‚
- å®˜ç½‘æä¾›äº†æ¸¸æˆçš„å®‰è£…æ–¹å¼ï¼ŒLinuxGSMå®‰è£…çš„æœ¬è´¨æ˜¯å®‰è£…ä¾èµ–ç¨‹åºåŒ…ï¼Œå¹¶ä¸”é€šè¿‡ä¸€ç³»åˆ—è„šæœ¬è¿›è¡Œç®¡ç†ã€‚å½“ç„¶LinuxGSMä¹Ÿæœ‰[Dockerç‰ˆæœ¬](https://github.com/GameServerManagers/LinuxGSM-Docker)ï¼Œä½†æ˜¯ä½¿ç”¨Githubä¾ç„¶å­˜åœ¨é—®é¢˜ï¼Œè¦æƒ³åŠæ³•è‡ªè¡Œè§£å†³ï¼ˆæ¨èè‡ªè¡Œæ ¹æ®æºç é‡æ–°æ„å»ºï¼Œæ¨è[gitee.comé•œåƒ](https://gitee.com/mirrors/LinuxGSM)ï¼‰ã€‚
- ### ä½¿ç”¨Docker
- æ¯”è¾ƒæ¨èçš„Dockeré•œåƒï¼š
- [sourceservers/left4dead2 - Docker Image | Docker Hub](https://hub.docker.com/r/sourceservers/left4dead2) by [startersclan/docker-sourceservers: Source / Goldsource dedicated server images built through use of steamcmd. ğŸ³ (github.com)](https://github.com/startersclan/docker-sourceservers)
- å®¹å™¨é…ç½®æ³¨æ„è®¾ç½®`timezone`ä»¥ä¿è¯logè¾“å‡ºæ—¶é—´æ— è¯¯ã€‚
- `TZ=Asia/Shanghai`
- ### L4D2æ’ä»¶
- å¿…é¡»çš„æ’ä»¶å¹³å°ï¼š
- [SourceMod: Half-Life 2 Scripting](https://www.sourcemod.net/)
- [Metamod:Source - News (metamodsource.net)](http://www.metamodsource.net/)
- å’Œå¥½æœ‹å‹ä¸€èµ·ç©çš„è¯ï¼Œå¿…è¦çš„æ’ä»¶æœ‰è‡ªåŠ¨æ¢å›¾ã€å¤šäººè§£é”ï¼Œå…¶ä½™çš„è‡ªè¡Œæ­é…ã€‚æœ‰å¿…è¦è¯´çš„æ˜¯ï¼Œæƒ³è¦å¼€å¯å¤šäººæ¸¸ç©ï¼Œå¿…é¡»å…³é—­æœåŠ¡å™¨çš„è‡ªåŠ¨åŒ¹é…ï¼Œè¿™æ ·æ‰èƒ½ç”Ÿæ•ˆã€‚
- æ¯”è¾ƒæ¨èçš„æ’ä»¶ä½¿ç”¨æ–¹å¼æ˜¯é€šè¿‡æ•´åˆåŒ…ï¼Œæ¯”è¾ƒæ¨èçš„æœ‰[[æœ›å¤œæ•´åˆåŒ…]]ã€[[è±†ç“£é…±ãª]]ã€‚
- **ç‰¹ç‚¹**
- æœ›å¤œæ•´åˆåŒ…
	- ç¨³å®šé€‚ç”¨å…¨ç‰ˆæœ¬
	- ä¸æ›´æ–°
	- å¯¹Linuxé€‚é…å·®
- è±†ç“£é…±ãª
	- æŒç»­æ›´æ–°
	- æ•´åˆç¨‹åº¦å¥½
	- å¤šå¹³å°é€‚é…éƒ½å¾ˆå¥½
- ### é…ç½®
- server.cfg æ–‡ä»¶ç®¡ç†æœåŠ¡å™¨çš„é…ç½®å€¼å‚è€ƒï¼š[List of L4D2 Cvars - Valve Developer Community (valvesoftware.com)](https://developer.valvesoftware.com/wiki/List_of_L4D2_Cvars)
- #### æ–‡ä»¶ç›®å½•å‚è€ƒ
- ```shell
  /left4dead2/cfg/server.cfg # æœåŠ¡å™¨é…ç½®
  /left4dead2/motd.txt # ä»Šæ—¥æ¶ˆæ¯
  /left4dead2/host.txt # ä¸»æœºåç§°å¤´
  /left4dead2/addons/ # æ’ä»¶ æ‰©å±• æ’ä»¶å¹³å°
  /left4dead2/cfg/ # é…ç½®æ–‡ä»¶ æ’ä»¶å¹³å°
  /left4dead2/addons/sourcemod/configs/admins_simple.ini #æ’ä»¶å¹³å°ç®¡ç†å‘˜é…ç½®
  ```
- ### vpkæ–‡ä»¶
- ç¬¬ä¸‰æ–¹å›¾æˆ–modï¼Œé€šå¸¸æ–‡ä»¶åç¼€ä¸º`.vpk`æ”¾ç½®åœ¨addonsç›®å½•ä¸­ï¼Œé€šå¸¸å®ƒä»¬ä¼šæ±¡æŸ“æ•´ä¸ªæ¸¸æˆç¯å¢ƒï¼Œå¼ºçƒˆè¦æ±‚ä¸è¦ä½¿ç”¨åœ¨æœåŠ¡å™¨ç¯å¢ƒã€‚
- ## å®é™…é¡¹ç›®
- ### docker-compose.yaml
- ```yaml
  version: '3.4'
  services:
  linuxgsm:
    image: "ghcr.io/gameservermanagers/linuxgsm-docker:latest"
    container_name: l4d2server
    environment:
      - GAMESERVER=l4d2server
      - LGSM_GITHUBUSER=GameServerManagers
      - LGSM_GITHUBREPO=LinuxGSM
      - LGSM_GITHUBBRANCH=master
      - TZ=Asia/Shanghai
    volumes:
      - ./serverfiles:/home/linuxgsm/serverfiles
      - ./log:/home/linuxgsm/log
      - ./config-lgsm:/home/linuxgsm/lgsm/config-lgsm
    ports:
      - "27015:27015/tcp"
      - "27015:27015/udp"
      - "27020:27020/udp"
      - "27005:27005/udp"
    restart: unless-stopped
  ```
- ### æŸ¥è¯¢æœåŠ¡å™¨çŠ¶æ€
- é€šè¿‡gamedigæŸ¥è¯¢ï¼Œå‚è€ƒ
- ## æŠ€å·§æ³¨æ„
- ä¿®æ”¹æœåŠ¡å™¨é…ç½®å‰è¯·å…ˆå…³é—­æœåŠ¡ã€‚
- æ’ä»¶é…ç½®æ–‡ä»¶ç›®å½•`./serverfiles/left4dead2/cfg/sourcemod/`
- æ’ä»¶ç¯å¢ƒé…ç½®æ–‡ä»¶ç›®å½•`./serverfiles/left4dead2/addons/sourcemod/configs/`
- æ¸¸æˆå†…ç®¡ç†å‘˜æŒ‡ä»¤`admin` `rygive`ï¼Œç®¡ç†å‘˜æ§åˆ¶å°`sm_pause`å¯æš‚åœæ¸¸æˆæ—¶é—´ã€‚
- IPæ­£åˆ™è¡¨è¾¾`((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}`
- ### [[steam]]æœåŠ¡å™¨æ§åˆ¶å°
- ```shell
  sm help
  sm plugins list # åˆ—å‡ºæ’ä»¶åˆ—è¡¨
  ```
- ### é€šè¿‡steamé“¾æ¥æœåŠ¡å™¨
- `steam://connect/ip:port`